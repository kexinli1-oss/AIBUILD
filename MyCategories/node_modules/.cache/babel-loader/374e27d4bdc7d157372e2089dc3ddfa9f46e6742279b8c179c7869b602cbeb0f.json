{"ast":null,"code":"// sagas.js\nimport { call, put, takeEvery } from 'redux-saga/effects';\nimport { FETCH_CATEGORIES, setCategories } from './actions/actions';\nfunction transformCategory(category) {\n  if (!category || typeof category !== 'object') {\n    return null;\n  }\n  const transformedCategory = {\n    title: category.name,\n    value: category.categoryId\n  };\n  if (Array.isArray(category.children) && category.children.length > 0) {\n    transformedCategory.children = category.children.map(transformCategory);\n  }\n  return transformedCategory;\n}\nfunction transformCategories(categories) {\n  if (!Array.isArray(categories) || categories.length === 0) {\n    return [];\n  }\n  return categories.map(transformCategory);\n}\nfunction* fetchCategoriesAsync() {\n  try {\n    //const categories1 = {\"categoryId\":\"root\",\"name\":\"Root Category\",\"parent\":null,\"children\":[{\"categoryId\":\"category1\",\"name\":\"Category One\",\"parent\":\"root\",\"children\":[{\"categoryId\":\"category1-3\",\"name\":\"Category One Three\",\"parent\":\"category1\",\"children\":[]},{\"categoryId\":\"category1-1\",\"name\":\"Category One One\",\"parent\":\"category1\",\"children\":[{\"categoryId\":\"category1-1-1\",\"name\":\"Category One One One\",\"parent\":\"category1-1\",\"children\":[{\"categoryId\":\"category1-1-1-1\",\"name\":\"Category One One One One\",\"parent\":\"category1-1-1\",\"children\":[]},{\"categoryId\":\"category1-1-1-2\",\"name\":\"Category One One One Two\",\"parent\":\"category1-1-1\",\"children\":[{\"categoryId\":\"category1-1-1-2-1\",\"name\":\"Category 111211\",\"parent\":\"category1-1-1-2\",\"children\":[]}]}]},{\"categoryId\":\"category1-1-2\",\"name\":\"Category One One Two\",\"parent\":\"category1-1\",\"children\":[]}]},{\"categoryId\":\"category1-2\",\"name\":\"Category One Two\",\"parent\":\"category1\",\"children\":[{\"categoryId\":\"category1-2-1\",\"name\":\"Category One Two One\",\"parent\":\"category1-2\",\"children\":[]},{\"categoryId\":\"category1-2-2\",\"name\":\"Category One Two Two\",\"parent\":\"category1-2\",\"children\":[]}]},{\"categoryId\":\"category1-5\",\"name\":\"Category One Five\",\"parent\":\"category1\",\"children\":[{\"categoryId\":\"category1-5-7\",\"name\":\"Category One Five Seven\",\"parent\":\"category1-5\",\"children\":[{\"categoryId\":\"category1-5-7-1\",\"name\":\"Category One Five Seven One\",\"parent\":\"category1-5-7\",\"children\":[{\"categoryId\":\"category1-5-7-1-1\",\"name\":\"Category 15711\",\"parent\":\"category1-5-7-1\",\"children\":[]},{\"categoryId\":\"category1-5-7-1-2\",\"name\":\"Category 15712\",\"parent\":\"category1-5-7-1\",\"children\":[]}]}]}]},{\"categoryId\":\"category1-4\",\"name\":\"Category One Four\",\"parent\":\"category1\",\"children\":[]}]},{\"categoryId\":\"category3\",\"name\":\"Category Three\",\"parent\":\"root\",\"children\":[{\"categoryId\":\"category3-1\",\"name\":\"Category Three One\",\"parent\":\"category3\",\"children\":[]}]},{\"categoryId\":\"category4\",\"name\":\"Category Four\",\"parent\":\"root\",\"children\":[]},{\"categoryId\":\"category5\",\"name\":\"Category Five\",\"parent\":\"root\",\"children\":[]},{\"categoryId\":\"category2\",\"name\":\"Category Two\",\"parent\":\"root\",\"children\":[{\"categoryId\":\"category2-1\",\"name\":\"Category Two One\",\"parent\":\"category2\",\"children\":[]},{\"categoryId\":\"category2-2\",\"name\":\"Category Two Two\",\"parent\":\"category2\",\"children\":[{\"categoryId\":\"category2-2-2\",\"name\":\"Category Two Two Two\",\"parent\":\"category2-2\",\"children\":[]}]}]}]}\n\n    const response = yield call(fetch, 'http://localhost:8080/categoryTree'); // Replace with your API URL\n    const categories1 = yield response.json();\n    const categories = [categories1];\n\n    // Transform the categories\n    const transformedCategories = transformCategories(categories);\n    //yield put(setCategories(transformedCategories));\n    yield put(setCategories(categories));\n  } catch (error) {\n    console.error('Error fetching categories:', error);\n  }\n}\nfunction* watchFetchCategories() {\n  yield takeEvery(FETCH_CATEGORIES, fetchCategoriesAsync);\n}\nexport default watchFetchCategories;","map":{"version":3,"names":["call","put","takeEvery","FETCH_CATEGORIES","setCategories","transformCategory","category","transformedCategory","title","name","value","categoryId","Array","isArray","children","length","map","transformCategories","categories","fetchCategoriesAsync","response","fetch","categories1","json","transformedCategories","error","console","watchFetchCategories"],"sources":["C:/Kexin/AIBUILD/MyCategories/src/sagas.js"],"sourcesContent":["// sagas.js\r\nimport { call, put, takeEvery } from 'redux-saga/effects';\r\nimport { FETCH_CATEGORIES, setCategories } from './actions/actions';\r\n\r\nfunction transformCategory(category) {\r\n  if (!category || typeof category !== 'object') {\r\n    return null;\r\n  }\r\n\r\n  const transformedCategory = {\r\n    title: category.name,\r\n    value: category.categoryId,\r\n  };\r\n\r\n  if (Array.isArray(category.children) && category.children.length > 0) {\r\n    transformedCategory.children = category.children.map(transformCategory);\r\n  }\r\n\r\n  return transformedCategory;\r\n}\r\n\r\nfunction transformCategories(categories) {\r\n  if (!Array.isArray(categories) || categories.length === 0) {\r\n    return [];\r\n  }\r\n\r\n  return categories.map(transformCategory);\r\n}\r\n\r\nfunction* fetchCategoriesAsync() {\r\n  try {\r\n    //const categories1 = {\"categoryId\":\"root\",\"name\":\"Root Category\",\"parent\":null,\"children\":[{\"categoryId\":\"category1\",\"name\":\"Category One\",\"parent\":\"root\",\"children\":[{\"categoryId\":\"category1-3\",\"name\":\"Category One Three\",\"parent\":\"category1\",\"children\":[]},{\"categoryId\":\"category1-1\",\"name\":\"Category One One\",\"parent\":\"category1\",\"children\":[{\"categoryId\":\"category1-1-1\",\"name\":\"Category One One One\",\"parent\":\"category1-1\",\"children\":[{\"categoryId\":\"category1-1-1-1\",\"name\":\"Category One One One One\",\"parent\":\"category1-1-1\",\"children\":[]},{\"categoryId\":\"category1-1-1-2\",\"name\":\"Category One One One Two\",\"parent\":\"category1-1-1\",\"children\":[{\"categoryId\":\"category1-1-1-2-1\",\"name\":\"Category 111211\",\"parent\":\"category1-1-1-2\",\"children\":[]}]}]},{\"categoryId\":\"category1-1-2\",\"name\":\"Category One One Two\",\"parent\":\"category1-1\",\"children\":[]}]},{\"categoryId\":\"category1-2\",\"name\":\"Category One Two\",\"parent\":\"category1\",\"children\":[{\"categoryId\":\"category1-2-1\",\"name\":\"Category One Two One\",\"parent\":\"category1-2\",\"children\":[]},{\"categoryId\":\"category1-2-2\",\"name\":\"Category One Two Two\",\"parent\":\"category1-2\",\"children\":[]}]},{\"categoryId\":\"category1-5\",\"name\":\"Category One Five\",\"parent\":\"category1\",\"children\":[{\"categoryId\":\"category1-5-7\",\"name\":\"Category One Five Seven\",\"parent\":\"category1-5\",\"children\":[{\"categoryId\":\"category1-5-7-1\",\"name\":\"Category One Five Seven One\",\"parent\":\"category1-5-7\",\"children\":[{\"categoryId\":\"category1-5-7-1-1\",\"name\":\"Category 15711\",\"parent\":\"category1-5-7-1\",\"children\":[]},{\"categoryId\":\"category1-5-7-1-2\",\"name\":\"Category 15712\",\"parent\":\"category1-5-7-1\",\"children\":[]}]}]}]},{\"categoryId\":\"category1-4\",\"name\":\"Category One Four\",\"parent\":\"category1\",\"children\":[]}]},{\"categoryId\":\"category3\",\"name\":\"Category Three\",\"parent\":\"root\",\"children\":[{\"categoryId\":\"category3-1\",\"name\":\"Category Three One\",\"parent\":\"category3\",\"children\":[]}]},{\"categoryId\":\"category4\",\"name\":\"Category Four\",\"parent\":\"root\",\"children\":[]},{\"categoryId\":\"category5\",\"name\":\"Category Five\",\"parent\":\"root\",\"children\":[]},{\"categoryId\":\"category2\",\"name\":\"Category Two\",\"parent\":\"root\",\"children\":[{\"categoryId\":\"category2-1\",\"name\":\"Category Two One\",\"parent\":\"category2\",\"children\":[]},{\"categoryId\":\"category2-2\",\"name\":\"Category Two Two\",\"parent\":\"category2\",\"children\":[{\"categoryId\":\"category2-2-2\",\"name\":\"Category Two Two Two\",\"parent\":\"category2-2\",\"children\":[]}]}]}]}\r\n\r\n    const response = yield call(fetch, 'http://localhost:8080/categoryTree'); // Replace with your API URL\r\n    const categories1 = yield response.json();\r\n\r\n    const categories = [\r\n      categories1\r\n    ];\r\n  \r\n    // Transform the categories\r\n    const transformedCategories = transformCategories(categories);\r\n    //yield put(setCategories(transformedCategories));\r\n    yield put(setCategories(categories));\r\n  } catch (error) {\r\n    console.error('Error fetching categories:', error);\r\n  }\r\n}\r\n\r\nfunction* watchFetchCategories() {\r\n  yield takeEvery(FETCH_CATEGORIES, fetchCategoriesAsync);\r\n}\r\n\r\nexport default watchFetchCategories;"],"mappings":"AAAA;AACA,SAASA,IAAI,EAAEC,GAAG,EAAEC,SAAS,QAAQ,oBAAoB;AACzD,SAASC,gBAAgB,EAAEC,aAAa,QAAQ,mBAAmB;AAEnE,SAASC,iBAAiBA,CAACC,QAAQ,EAAE;EACnC,IAAI,CAACA,QAAQ,IAAI,OAAOA,QAAQ,KAAK,QAAQ,EAAE;IAC7C,OAAO,IAAI;EACb;EAEA,MAAMC,mBAAmB,GAAG;IAC1BC,KAAK,EAAEF,QAAQ,CAACG,IAAI;IACpBC,KAAK,EAAEJ,QAAQ,CAACK;EAClB,CAAC;EAED,IAAIC,KAAK,CAACC,OAAO,CAACP,QAAQ,CAACQ,QAAQ,CAAC,IAAIR,QAAQ,CAACQ,QAAQ,CAACC,MAAM,GAAG,CAAC,EAAE;IACpER,mBAAmB,CAACO,QAAQ,GAAGR,QAAQ,CAACQ,QAAQ,CAACE,GAAG,CAACX,iBAAiB,CAAC;EACzE;EAEA,OAAOE,mBAAmB;AAC5B;AAEA,SAASU,mBAAmBA,CAACC,UAAU,EAAE;EACvC,IAAI,CAACN,KAAK,CAACC,OAAO,CAACK,UAAU,CAAC,IAAIA,UAAU,CAACH,MAAM,KAAK,CAAC,EAAE;IACzD,OAAO,EAAE;EACX;EAEA,OAAOG,UAAU,CAACF,GAAG,CAACX,iBAAiB,CAAC;AAC1C;AAEA,UAAUc,oBAAoBA,CAAA,EAAG;EAC/B,IAAI;IACF;;IAEA,MAAMC,QAAQ,GAAG,MAAMpB,IAAI,CAACqB,KAAK,EAAE,oCAAoC,CAAC,CAAC,CAAC;IAC1E,MAAMC,WAAW,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;IAEzC,MAAML,UAAU,GAAG,CACjBI,WAAW,CACZ;;IAED;IACA,MAAME,qBAAqB,GAAGP,mBAAmB,CAACC,UAAU,CAAC;IAC7D;IACA,MAAMjB,GAAG,CAACG,aAAa,CAACc,UAAU,CAAC,CAAC;EACtC,CAAC,CAAC,OAAOO,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;EACpD;AACF;AAEA,UAAUE,oBAAoBA,CAAA,EAAG;EAC/B,MAAMzB,SAAS,CAACC,gBAAgB,EAAEgB,oBAAoB,CAAC;AACzD;AAEA,eAAeQ,oBAAoB"},"metadata":{},"sourceType":"module","externalDependencies":[]}